"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[63515,26717],{344184:(e,t,n)=>{n.d(t,{Z:()=>i,v:()=>a});let a=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function i(){if(!a())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},859492:(e,t,n)=>{n.d(t,{kt:()=>m,fs:()=>u,eK:()=>p,Ly:()=>_,BY:()=>c,bN:()=>h,jM:()=>d,RC:()=>s,EU:()=>o});let a=/\s\s+/g,i=e=>e.replace(a," ");var l=n(438711);let r=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_title"])),s=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,o=(e,t)=>e?e.trim().length>t?(0,l.ZP)(e.trim(),t).trim():e.trim():"",u=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,storyPinDataId:i,storyPinDataMetadataPinTitle:l})=>{let r=l||e,s=o(t,200);return s?s:n?n:a?a:i&&r?r:null},d=({closeupUnifiedDescription:e,pinDescription:t})=>i((0,l.ZP)(e||t||"",496)).trim(),p=e=>{let{richSummaryDisplayName:t}=e,n=e.pinJoinVisualAnnotation||[],a=e.pinJoinAnnotationsWithLinks||{},r=e.richMetadataDescription||"",s=e.closeupUnifiedDescription||"",o=n.map(e=>(a||{})[e]||{name:e,url:""}),u="",d=(t||"").toLocaleLowerCase().trim(),p=r.toLocaleLowerCase().trim(),_=s.toLocaleLowerCase().trim();return s&&s.length>3&&_!==d?u=s:r&&r.length>3&&p!==d&&(u=r),u&&(u=i((0,l.ZP)(u,496)).trim()),{description:u,annotationsWithLinks:o}},_=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,storyPinDataId:i,storyPinDataMetadataPinTitle:l,pinJoinVisualAnnotation:s,seoNoindexReason:d,shouldUseSimplifiedTitle:p=!1})=>r.has(d??"")?s?.[0]??" ":p?o(t,200)||s?.[0]||"":u({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,storyPinDataId:i,storyPinDataMetadataPinTitle:l})||s?.[0]||e,c=e=>`/pin/${e}/`,m=(e,t)=>{let n=`Pinterest video from ${t}: `.concat(e);return""===t?e:n},h=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:c(e)},217599:(e,t,n)=>{n.d(t,{X:()=>a});let a="favorited"},942730:(e,t,n)=>{n.d(t,{kf:()=>g,l5:()=>m,of:()=>_,xC:()=>h,yz:()=>c});var a=n(667294),i=n(218291),l=n(520949),r=n(755090),s=n(839284),o=n(992114),u=n(785893);let{Provider:d,getMaybe:p}=(0,i.Z)("PwaContext"),_=({children:e,initialContext:t})=>{let[n,i]=(0,a.useState)(null),s=t||{pwaType:"unknown",twaType:null},p=s.pwaType;(0,r.Z)(()=>{let e=(0,l.FB)(window)||"unknown";i(e),p!==e&&(0,o.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:p,clientPwaType:e,conflict:"unknown"!==p&&"unknown"!==e}})});let _="unknown"===p&&n?n:p,{twaType:c}=s,m=(0,a.useMemo)(()=>({pwaType:_,twaType:c}),[_,c]);return(0,u.jsx)(d,{value:m,children:e})},c=()=>{let e=p();return e?.pwaType??"unknown"},m=()=>{let e=p();return e?.twaType??null},h=()=>"android-twa"===c(),g=()=>{let e=c(),t=(0,s.Z)();return"unknown"===e&&t?null:"windows"===e}},54368:(e,t,n)=>{n.d(t,{o$:()=>a,ty:()=>i,uH:()=>l});let{Provider:a,MaybeConsumer:i,getMaybe:l}=(0,n(218291).Z)("inviteContext")},753934:(e,t,n)=>{n.d(t,{M:()=>r,Q:()=>l});var a=n(667294);let i=(0,a.createContext)(null),l=()=>(0,a.useContext)(i),r=i},765302:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(547504),i=n(838380),l=n(779947),r=n(859492),s=n(943369),o=n(756493),u=n(112800);let d=new class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}},p=new class{constructor(){this.rules={},this.init()}init(){for(let e of[{category:"dweb_max_free_pin_modal",validate:this.validateImageView.bind(this),action:"SHOW_LOGIN_MODAL"},{category:"dweb_save",validate:this.saveRule.bind(this),action:"SHOW_SAVE_MODAL"},{category:"dweb_scroll_banner_dismiss_rule",validate:this.scrollBanerDismissRule.bind(this),action:"BOTTOM_RIGHT_BANNER_DISMISS"},{category:"dweb_scroll_banner_limit_rule",validate:this.scrollBannerLimitRule.bind(this),action:"BOTTOM_RIGHT_BANNER_LIMIT"},{category:"dweb_scroll_banner_show",validate:this.scrollBannerShowRule.bind(this),action:"BOTTOM_RIGHT_BANNER_SHOW"}])this.addRule(e)}initExperiment(e){this.experiment=e}addRule(e){this.rules[e.category]=this.rules[e.category]??[],this.rules[e.category].push(e)}evaluate(e,t){if(!this.rules[e])return null;for(let n of this.rules[e])if(n.validate(t))return n.action;return null}validateImageView(e){let{clickCount:t}=e,{hasSeenLoginModal:n}=e,{hasDismissedLoginModal:a}=e,i=this.experiment?.group==="enabled_relaxation";return i?t+1>=4&&!n&&!a:t+1>=4&&!n}saveRule(e){return"desktop"===e.deviceType}scrollBanerDismissRule(e){return e.scrollTop<64}scrollBannerLimitRule(e){return e.scrollTop<4e3}scrollBannerShowRule(e){let t=this.experiment?.group==="enabled_relaxation";return t?e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3&&!e.hasDismissedLoginModal:e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3}};var _=n(183908);let c=new class{constructor(){this.init()}init(){d.on("pinView",this.handlePinView.bind(this)),d.on("pinSave",this.handleSavePin.bind(this)),d.on("showDesktopSignupModal",this.showDesktopSignupModal.bind(this)),d.on("hideDesktopSignupModal",this.hideDesktopSignupModal.bind(this)),d.on("onScrollHybridBanner",this.onScrollHybridBanner.bind(this))}initExperiment(e){this.experiment=e("dweb_upsell_manager_mvp_2"),this.experiment&&p.initExperiment(this.experiment)}emitEvent(e,t){d.emit(e,t)}handlePinView(e){let{history:t,linkTarget:n}=e,d=(0,s.M0)().getItem(a.cu)??0;(0,s.M0)().setItem(a.cu,d+1);let c=(0,o.Nl)().getItem(i.J7);if("SHOW_LOGIN_MODAL"===p.evaluate("dweb_max_free_pin_modal",{clickCount:d,hasSeenLoginModal:c})){let{onUpsellTriggerCallback:a}=e;a(),(0,u.My)("dweb.navigational.upsell.show"),(0,o.Nl)().setItem(i.J7,"true");let s={pinId:e.pinId,seoUrl:e.seoUrl},d=(0,_.Z)((0,r.bN)(s),{mt:"login"});if("fullPageLoad"===n)(0,l.Z)(d,!1);else if("duploClientNav"===n)t.push(d);else{let e=window.open(d,"_blank");e?.focus()}}}handleSavePin(e){if("SHOW_SAVE_MODAL"===p.evaluate("dweb_save",{deviceType:e.deviceType})){let{pinId:t,attributionLabel:n,modalHeadingType:a,showSignupModal:i}=e;i({attributionLabel:"extended_save_out_of_quota"===a?"click_save_button_with_max_unauth_saves":n||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",mobileOptions:{headingType:a},desktopOptions:{modalType:"signup",modalOptions:{source:"saveButtonExp",container:"save"}},pinId:t})}}showDesktopSignupModal(e){let{displayProps:t,viewType:n,viewParameter:a,trackInteraction:i,trackConversionUpsellForContext:l,logDesktopSignupModalEvent:r,dispatchSignupModalAction:s}=e;s({type:"show",displayProps:t});let{attributionLabel:o,signupFlow:u,reason:d}=t;i({action:"trigger",item:u.type.includes("signup")?"signup-modal":"login-modal"}),l({viewType:n,viewParameter:a,eventType:14688,element:{UPSELL_LOGIN_OR_SIGNUP:13319,ACTION_REQUIRES_LOGIN_OR_SIGNUP:13320,CLICK_LOGIN_OR_SIGNUP:13321}[d]||13322,component:"login"===u.type?14212:14214,upsellReason:o}),r("dispatch_show",{attributionLabel:o,modalType:u.type,reason:d})}hideDesktopSignupModal(e){let{shouldDoSideEffects:t,loginForMore:n,dispatchSignupModalAction:a,logDesktopSignupModalEvent:i}=e,l=e.isEligibilityLoginForMore;t&&n&&l&&n.setVisible(!1),a({type:"dismiss"}),i("dispatch_dismiss",{shouldDoSideEffects:t})}onScrollHybridBanner(e){let{evt:t,isSafari:n,trackConversionUpsell:a,UnauthHybridBannerClassComponent:l,isInOpenModalExperience:r}=e,s=0,u=t&&t.target instanceof Document?t.target:null;if(u&&u.documentElement&&u.documentElement.scrollTop>0?s=u.documentElement.scrollTop:u&&u.body&&u.body.scrollTop>0&&(s=u.body.scrollTop),"BOTTOM_RIGHT_BANNER_DISMISS"===p.evaluate("dweb_scroll_banner_dismiss_rule",{scrollTop:s}))l.state.shouldShowBanner&&!l.state.bannerDismissed&&(a({element:13893,eventType:10243}),l.state.bannerDismissed=!0),l.setShouldShowBanner(!1);else if("BOTTOM_RIGHT_BANNER_LIMIT"===p.evaluate("dweb_scroll_banner_limit_rule",{scrollTop:s})){let e=l.state.shouldShowBanner;l.setState(e=>({shouldShowBanner:"BOTTOM_RIGHT_BANNER_SHOW"===p.evaluate("dweb_scroll_banner_show",{isInOpenModalExperience:r,isSafari:n,state:e}),scrollSessionCount:Math.ceil(s/800)}),()=>{e||!l.state.shouldShowBanner||l.state.bannerViewed||(a({eventType:14688,element:13319,component:14479,upsellReason:"scroll_down"}),l.state.bannerViewed=!0)})}else!(0,o.Nl)().getItem(i.J7)&&!r&&n&&t&&t.preventDefault()}}},712151:(e,t,n)=>{n.d(t,{Z:()=>a});let a=e=>e?"string"==typeof e?e:e.pathname?e.pathname:"":""},200559:(e,t,n)=>{n.d(t,{D:()=>a,u:()=>i});let{Provider:a,getMaybe:i}=(0,n(218291).Z)("unauthPageWrapperContext")},717574:(e,t,n)=>{n.d(t,{K:()=>r,T:()=>s});var a=n(667294),i=n(785893);let l=(0,a.createContext)({getPinFeedbackStatus:()=>void 0,setPinFeedbackStatus:()=>{}}),r=()=>(0,a.useContext)(l);function s({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),r=(0,a.useMemo)(()=>({getPinFeedbackStatus:({pinId:e})=>t[e],setPinFeedbackStatus:({pinId:e,pinFeedbackStatus:a})=>n({...t,[e]:a})}),[t]);return(0,i.jsx)(l,{value:r,children:e})}},118922:(e,t,n)=>{n.d(t,{ET:()=>r,JH:()=>o,UQ:()=>s,WG:()=>d,yh:()=>p});var a=n(667294),i=n(218291),l=n(785893);let r={NONE:"NONE",GROUP:"GROUP",SECRET:"SECRET",ARCHIVED:"ARCHIVED"},s={NONE:0,ARCHIVED:1,GROUP:2,SECRET:3},o={COLORS:"COLORS",CREATED_BY_ME:"CREATED_BY_ME",FAVORITED:"FAVORITED",FAVORITED_AND_CREATED:"FAVORITED_AND_CREATED_BY_ME",INTERESTS:"INTERESTS",NONE:""},{Provider:u,getMaybe:d}=(0,i.Z)("ProfileViewContext");function p({children:e}){let[t,n]=(0,a.useState)(),[i,r]=(0,a.useState)(new Map),[s,d]=(0,a.useState)(),[p,_]=(0,a.useState)(),[c,m]=(0,a.useState)(o.NONE),[h,g]=(0,a.useState)(0),[v,b]=(0,a.useState)(),w=(0,a.useCallback)((e,t)=>{r(new Map(i.set(e,t)))},[i]),y=(0,a.useMemo)(()=>({boardPinDensity:t,boardSortOrder:i,profileBoardView:s,profilePinDensity:p,profileFollowingSelectedIndex:h,selfProfilePinFilter:c,setBoardPinDensity:n,setSelfProfilePinFilter:m,updateBoardSortOrder:w,selfProfileBoardFilter:v,setSelfProfileBoardFilter:b,setProfileBoardView:d,setProfilePinDensity:_,setProfileFollowingSelectedIndex:g}),[t,i,s,p,h,c,v,w]);return(0,l.jsx)(u,{value:y,children:e})}},63500:(e,t,n)=>{n.d(t,{dL:()=>s,fJ:()=>u,gC:()=>o});var a=n(545007),i=n(218291),l=n(785893);let{Provider:r,get:s}=(0,i.Z)("Boards");function o(){let e=s();return t=>e[t]}function u({children:e}){let t=(0,a.v9)(({boards:e})=>e,a.wU);return(0,l.jsx)(r,{value:t,children:e})}},864548:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(545007);let i=()=>(0,a.v9)(({session:{canUseNativeApp:e}})=>e)},924926:(e,t,n)=>{n.d(t,{$:()=>s,w:()=>o});var a=n(667294),i=n(218291),l=n(785893);let{Provider:r,getMaybe:s}=(0,i.Z)("CloseupPreviewContext");function o({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),i=(0,a.useMemo)(()=>({setData:(e,t)=>n(n=>({...n,[e]:t})),getData:e=>t[e]}),[t]);return(0,l.jsx)(r,{value:i,children:e})}},21642:(e,t,n)=>{n.d(t,{$p:()=>M,_l:()=>I,cO:()=>E,t2:()=>O,w2:()=>R,xM:()=>f});var a=n(667294),i=n(616550),l=n(825332),r=n(297934),s=n(890360),o=n(967312),u=n(174646),d=n(113474),p=n(857147),_=n(538645),c=n(785893);let m="UnauthDesktopSocialPinLandingPageContext",h="UnauthMobileSocialPinLandingPageContext",g="AthDesktopSocialPinLandingPageContext",v="AuthMobileSocialPinLandingPageContext",b=(0,a.createContext)({hasSeenAuthDesktopLandingToast:!1,hasSeenAuthMobileLandingToast:!1,setHasSeenAuthDesktopLandingToast:()=>{},setHasSeenAuthMobileLandingToast:()=>{},hasDismissedLoginModal:!1,setHasDismissedLoginModal:()=>{},pinImageUrl:"",setPinImageUrl:()=>{}}),w=({children:e})=>{let[t,n]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!1),[r,s]=(0,a.useState)(!1),[o,u]=(0,a.useState)(""),d=(0,a.useMemo)(()=>({hasSeenAuthMobileLandingToast:t,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:i,setHasSeenAuthDesktopLandingToast:l,hasDismissedLoginModal:r,setHasDismissedLoginModal:s,pinImageUrl:o,setPinImageUrl:u}),[t,i,r,s,o,u]);return(0,c.jsx)(b,{value:d,children:e})},y=(0,a.createContext)({key:"",data:null}),S=({children:e})=>{let t=(0,l.TH)(),{isSocialBot:n,isBot:w}=(0,u.B)(),S=(0,r.Z)(),f=S&&S.isAuth,E=(0,_.HG)(),M=(0,a.useMemo)(()=>(0,s.fY)(t)&&(0,p.mB)(t.search).invite_code||"",[t]),I=(0,a.useMemo)(()=>{let e=(0,i.LX)(t.pathname,{path:"/pin/:id"});return String(e&&"id"in e.params&&e.params.id)||""},[t.pathname]),[O,R]=(0,a.useState)({key:"",data:null}),[T,k]=(0,a.useState)(!1),P=!f&&E,D=!f&&!E,{checkExperiment:C}=(0,o.r)(),{hasDismissedLoginModal:L}=(0,a.useContext)(b),{inDwebFullPageModalExp:N,dWebFullPageModalExpGroup:x,inDwebUnauthSocialPinLandingExp:A,unauthDwebSocialPinLandingGroup:U,inMwebUnauthSocialPinLandingExp:Z,unauthMwebSocialPinLandingGroup:B,inMwebUnauthRelatedPinsLimitExp:G,unauthMwebRelatedPinsLimitGroup:H,inMwebUnauthSocialPinLandingSecondaryUpsellExp:V,unauthMwebSocialPinLandingSecondaryUpsellGroup:F,inMwebUnauthSocialPinLandingVisualUpsellExp:j,unauthMwebSocialPinLandingVisualUpsellGroup:q}=(0,a.useMemo)(()=>{let e=!w&&!n&&P&&M&&(()=>{let e=C("ce_dweb_unauth_splp_blocking",{dangerouslySkipActivation:!0}),t=C("ce_dweb_unauth_splp_blocking_12s",{dangerouslySkipActivation:!0});return e.anyEnabled?e:t})()||{anyEnabled:!1,group:void 0},t=!w&&!n&&P&&M&&C("sg_dweb_unauth_social_pin_landing_page")||{anyEnabled:!1,group:void 0},a=!w&&!n&&D&&M&&(C("mweb_q2_mau_push_pc").anyEnabled&&C("mweb_q2_mau_push_pc")||C("mweb_q2_mau_push_pc_eu").anyEnabled&&C("mweb_q2_mau_push_pc_eu")||C("mweb_q2_mau_push_pc_advanced").anyEnabled&&C("mweb_q2_mau_push_pc_advanced")||C("mweb_q2_mau_push_pc_advanced_row").anyEnabled&&C("mweb_q2_mau_push_pc_advanced_row")||C("mweb_q2_mau_push_pc_emergency").anyEnabled&&C("mweb_q2_mau_push_pc_emergency")||C("mweb_q2_mau_push_pc_emergency_row").anyEnabled&&C("mweb_q2_mau_push_pc_emergency_row")||C("sg_mweb_unauth_social_pin_landing_page"))||{anyEnabled:!1,group:void 0},i=!w&&!n&&D&&M&&C("ce_mweb_unauth_related_pins_limit")||{anyEnabled:!1,group:void 0},l=a.anyEnabled&&L&&C("sg_mweb_unauth_social_pin_landing_secondary_upsell")||{anyEnabled:!1,group:void 0},r=a.anyEnabled&&C("ce_mweb_visual_plp_upsell")||{anyEnabled:!1,group:void 0};return{inDwebFullPageModalExp:e.anyEnabled,dWebFullPageModalExpGroup:e.group,inDwebUnauthSocialPinLandingExp:t.anyEnabled,unauthDwebSocialPinLandingGroup:t.group,inMwebUnauthSocialPinLandingExp:a.anyEnabled,unauthMwebSocialPinLandingGroup:a.group,inMwebUnauthRelatedPinsLimitExp:i.anyEnabled,unauthMwebRelatedPinsLimitGroup:i.group,inMwebUnauthSocialPinLandingSecondaryUpsellExp:l.anyEnabled,unauthMwebSocialPinLandingSecondaryUpsellGroup:l.group,inMwebUnauthSocialPinLandingVisualUpsellExp:r.anyEnabled,unauthMwebSocialPinLandingVisualUpsellGroup:r.group}},[w,n,P,D,M,C,L]),W="enabled_popover_profile"===U,J=(0,d.Z)(M?{name:"InviteCodeMetadataResource",options:{invite_code:M,field_set_key:W?"default_with_sender_recent_pins":"default"}}:null),z=J.isLoaded?J.data:null;(0,a.useEffect)(()=>{if(z){let e=z.sender??null,t=f&&e.id!==S.id&&e?.should_show_messaging&&S.should_show_messaging;if(P&&e){let t=null,n=null;A?t={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:U,inviterRecentPins:"enabled_popover_profile"===U&&e.recent_pin_images?.["222x"]||[],inviterUsername:"enabled_popover_profile"===U&&e.username||""}:N?n={inDwebFullPageModalExp:N,isFullPageModalDismissed:T,setIsFullPageModalDismissed:k}:t=[5,9,12,16].includes(z.invite_channel)?null:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name},R({key:m,data:{inviter:e,popoverData:t,modalData:n}})}else if(D&&e){if(Z||G){let t={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:B};V&&(t.secondaryExpGroup=F),G&&(t.limitedRelatedPinsExpGroup=H),j&&(t.visualExpGroup=q),R({key:h,data:{upsellData:t}})}}else t&&!E?R({key:v,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:S.id||""},pin:{pinId:I}}}}):t&&E&&R({key:g,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:S.id||""},pin:{pinId:I}}}})}else R({key:"",data:null})},[z,f,E,I,S,N,x,A,Z,B,D,U,P,G,H,V,F,j,q,T]);let Y=(0,a.useMemo)(()=>O,[O]);return(0,c.jsx)(y,{value:Y,children:e})},f=({children:e})=>(0,c.jsx)(w,{children:(0,c.jsx)(S,{children:e})}),E=()=>{let e=(0,a.useContext)(y);return e.key===m?e:null},M=()=>{let e=(0,a.useContext)(y);return e.key===h?e:null},I=()=>{let e=(0,a.useContext)(y);return e.key===v?e:null},O=()=>{let e=(0,a.useContext)(y);return e.key===g?e:null},R=()=>(0,a.useContext)(b)},869146:(e,t,n)=>{n.d(t,{G3:()=>p,Rp:()=>d,kp:()=>u});var a=n(547504),i=n(838380),l=n(1794),r=n(943369),s=n(756493);let o=14*l.F4,u=(e,t)=>{let n=function(){let e=Date.now(),t=(0,r.M0)(),n=Number(t.getItem(a.Li)??null);return{currentTime:e,firstUpsellTime:Number(t.getItem(a.O7)??null),lastUpsellTime:n,showedAppUpsellCurrentSession:!!(0,s.Nl)().getItem(i.JO)}}();return e?function(e,t,n){let{currentTime:i,firstUpsellTime:l,lastUpsellTime:s,showedAppUpsellCurrentSession:u}=e;return(n=n||o,!l||i<l+t)?!u:!!(i-s>n)&&((0,r.M0)().removeItem(a.O7),!0)}(n,l.F4):function(e,t){let{currentTime:n,lastUpsellTime:a}=e;return t=t||o,!a||n-a>t}(n,t)},d=({isBot:e,platform:t,userAgent:n})=>{try{return!e&&"android"===t&&7>parseFloat((e=>{let t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(n))}catch(e){return!1}},p=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},507815:(e,t,n)=>{n.d(t,{M:()=>f,v:()=>y});var a=n(667294),i=n(547504),l=n(218291),r=n(180307),s=n(943369),o=n(755090),u=n(69401),d=n(473094);let p=()=>(0,s.M0)().getItem(i.Vb)||[],_=()=>(0,s.M0)().getItem(i.ny)||[];var c=n(225333),m=n(720856),h=n(79947),g=n(785893);let v=e=>({...e,_updateUnauthUserAggregateDefinitions:function(){let{completedSearches:t,closeupPins:n,clickthroughPins:a,downloadedPinsCount:i}=e;e.isQUS=Number(t.length>=1||n.length>=3||a.length>=1||i>=1)},_getDaysSinceLastRevisitation:function(){let{revisitationState:t}=e,{ts:n}=t,a=new Date,i=new Date(n||a);return Math.max(Math.floor(Number(((a.getTime()-i.getTime())/864e5).toFixed(2))),0)},getSnapshot:function(){let t={};return Object.keys(e).forEach(n=>{"function"!=typeof e[n]&&void 0!==e[n]&&(t[n]=e[n])}),t}}),b=({isAuthenticated:e,countryFromIp:t,countryFromHostName:n,regionFromIp:a})=>{let l=(0,r.Z)({countryFromHostName:n||"",countryFromIp:t||"",regionFromIp:a||"",isAuthenticated:!!e}),o={isAuthenticated:Number(e),countryFromIp:t||"",countryFromHostName:n||"",regionFromIp:a||"",visitedUnauthPages:[],closeupPins:[],completedSearches:[],clickthroughPins:[],downloadedPinsCount:0,savedPins:[],isQUS:0,revisitationState:(0,c.K7)(),daysSinceLastRevisitation:0,isStorageAllowed:Number(l)};if(e||!o.isStorageAllowed)return Object.freeze({...v(o),...o});o.visitedUnauthPages=(0,h.ZP)(),o.closeupPins=(0,m.Z)(),o.completedSearches=_(),o.clickthroughPins=p(),o.downloadedPinsCount=parseInt((0,s.M0)().getItem(i.rN)||0,10),o.savedPins=(0,s.M0)().getItem(i.s1)??[],o.revisitationState=(0,c.iU)();let u=v(o);return o.daysSinceLastRevisitation=u._getDaysSinceLastRevisitation(),u._updateUnauthUserAggregateDefinitions(),Object.freeze({...u,...o})},{Provider:w,get:y}=(0,l.Z)("UnauthUserStateContext");function S(e,t){let{isAuthenticated:n,countryFromIp:a,countryFromHostName:l,isStorageAllowed:r,regionFromIp:o}=e;if(n||!r)return e;switch(t.type){case"UPDATE":break;case"ADD_UNAUTH_COMPLETED_SEARCH":(({query:e,rs:t,scope:n,rg:a})=>{let l=[..._()],r=l.length,o=r?l[0].query:"";if(!r||e!==o){let l=(0,d.Z)({query:e,rs:t,scope:n,rg:a});(0,s.M0)().prependItem(i.ny,l,u.LG)}})(t.payload);break;case"REMOVE_UNAUTH_COMPLETED_SEARCH":(({query:e})=>{let t=[..._()].filter(t=>t.query!==e);(0,s.M0)().setItem(i.ny,t)})(t.payload);break;case"ADD_UNAUTH_CLICKTHROUGH_PIN":(({pinId:e,link:t,imageSignature:n,domain:a})=>{let l=[...p()],r=l.length,o=r?l[0].pinId:"";if(!r||e!==o){let l=(0,d.Z)({pinId:e,link:t,imageSignature:n,domain:a});(0,s.M0)().prependItem(i.Vb,l,u.LG)}})(t.payload);break;default:return e}return b({isAuthenticated:n,countryFromIp:a,countryFromHostName:l,regionFromIp:o})}function f({children:e,initialState:t}){let[n,i]=(0,a.useReducer)(S,t,b);(0,o.Z)(()=>{i({type:"UPDATE"})});let l=(0,a.useMemo)(()=>({unauthUserState:n,unauthUserStateDispatch:i}),[n,i]);return(0,g.jsx)(w,{value:l,children:e})}},473094:(e,t,n)=>{n.d(t,{Z:()=>a});let a=function(e){return{...e,ts:Date.now()}}},225333:(e,t,n)=>{n.d(t,{K7:()=>s,Oh:()=>d,Vd:()=>u,WT:()=>r,iU:()=>o});var a=n(547504),i=n(943369),l=n(473094);let r=18e5,s=()=>({count:1,time:0,ts:Date.now()}),o=()=>{try{let{count:e,time:t,ts:n}=(0,i.M0)().getItem(a.SI)??{};if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return{count:e,time:t,ts:n};throw Error("Invalid revisitation data")}catch(e){return s()}},u=e=>{(0,i.M0)().setItem(a.SI,(0,l.Z)(e))};function d(){return o().count>1}},749642:(e,t,n)=>{n.d(t,{E:()=>r,S:()=>s});var a=n(667294),i=n(547504),l=n(943369);let r=e=>{let t=(0,l.M0)();e?t.setItem(i.rd,1):t.removeItem(i.rd)},s=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(!0)},[]),e&&((0,l.M0)().getItem(i.rd)??!1)}},356204:(e,t,n)=>{n.d(t,{$:()=>s,Z:()=>u});var a=n(547504),i=n(838380),l=n(943369),r=n(756493);let s=2,o=e=>e.length?{pins:e}:null,u=()=>{let e,t=(0,l.M0)(),n=(e=t.accessAllowed?t.getItem(a.s1):r.ZP.getItem(i.w3),e?.pins??[]),u=e=>t.accessAllowed?t.setItem(a.s1,o(e)):r.ZP.setItem(i.w3,o(e)),d=()=>n.length<s;return{pins:n,save:e=>{d()&&u(n.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>u(n.filter(({id:t})=>t!==e)),isSaved:e=>n.some(({id:t})=>t===e),clear:()=>u([]),canSaveMore:d}}},316866:(e,t,n)=>{n.d(t,{m:()=>i,o:()=>a});let{Provider:a,get:i}=(0,n(218291).Z)("LimitedLogin")},720856:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(69401),i=n(972414),l=n(79947);let r=()=>(e=>{let t=new Date,n=new Date(new Date().setDate(t.getDate()-a.ZB));return e.filter(e=>"closeup"===e.pageType&&new Date(e.ts)>=n)})((0,l.ZP)()).map(e=>({...e,id:(0,i.Z)(e.path)||""}))},79947:(e,t,n)=>{n.d(t,{Z4:()=>u,ZP:()=>d,t_:()=>s});var a=n(547504),i=n(69401),l=n(943369),r=n(473094);let s=()=>{let e=(0,l.M0)().getItem(a.pm);return null!==e?JSON.stringify(e):""},o=()=>(0,l.M0)().getItem(a.pm)??[],u=(e,t)=>{let n=[...o()],s=n.length,u=s?n[0].path:"";if(!s||e!==u){let n=(0,r.Z)({path:e,pageType:t});(0,l.M0)().prependItem(a.pm,n,i.LG)}},d=o},85575:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(667294),i=n(992114);function l(e){let t=(0,a.useRef)({kind:"NotOver"}),n=(0,a.useCallback)(()=>{"NotOver"===t.current.kind&&(t.current={kind:"OverButNotClicked",mousedOverAt:Date.now()})},[]),l=(0,a.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,i.LY)("entrypointRouter.timeOnLinkUntilMouseOut",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,i.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"MouseOut"}})),t.current={kind:"NotOver"}},[e]);return{onClick:(0,a.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,i.LY)("entrypointRouter.timeOnLinkUntilClick",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,i.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"Click"}}),t.current={kind:"OverAndHasClicked"})},[e]),onMouseEnter:n,onMouseLeave:l}}},118244:(e,t,n)=>{(0,n(276162).kr)()},57797:(e,t,n)=>{function a({children:e,metricName:t}){let n=void 0;return n&&n.serverRenderTimings&&!n.serverRenderTimings[t]&&(n.serverRenderTimings[t]=Date.now()),e}n.d(t,{Z:()=>a}),n(276162),n(118244)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/63515-751c17214d6f9770.mjs.map